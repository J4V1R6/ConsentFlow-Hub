<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.omg.org/bpmn20" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:bpsim="http://www.bpsim.org/schemas/1.0" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:drools="http://www.jboss.org/drools" id="_DSitoDbNEe-_3vOU48Zj7Q" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd http://www.omg.org/spec/DD/20100524/DC DC.xsd http://www.omg.org/spec/DD/20100524/DI DI.xsd " exporter="jBPM Process Modeler" exporterVersion="2.0" targetNamespace="http://www.omg.org/bpmn20">
  <bpmn2:itemDefinition id="_practitionerItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_fhirServerItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_requestQuestionnaireIdItem" structureRef="java.lang.Long"/>
  <bpmn2:itemDefinition id="_requestQuestionnaireResponseIdItem" structureRef="java.lang.Long"/>
  <bpmn2:itemDefinition id="_patientListItem" structureRef="java.util.ArrayList"/>
  <bpmn2:itemDefinition id="_reviewListItem" structureRef="java.util.ArrayList"/>
  <bpmn2:itemDefinition id="__9C329017-C865-46EA-A556-820F1803AF8B_processNameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9C329017-C865-46EA-A556-820F1803AF8B_fhirServerOutputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9C329017-C865-46EA-A556-820F1803AF8B_requestQuestionnaireIdOutputXItem" structureRef="java.lang.Long"/>
  <bpmn2:itemDefinition id="__E0024B6B-D932-46A4-90AD-27A8D95489D6_requestQuestionnaireResponseIdInputXItem" structureRef="java.lang.Long"/>
  <bpmn2:itemDefinition id="__E0024B6B-D932-46A4-90AD-27A8D95489D6_fhirServerInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__E0024B6B-D932-46A4-90AD-27A8D95489D6_patientListInputXItem" structureRef="java.util.ArrayList"/>
  <bpmn2:itemDefinition id="__E0024B6B-D932-46A4-90AD-27A8D95489D6_practitionerInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__E0024B6B-D932-46A4-90AD-27A8D95489D6_requestQuestionnaireIdInputXItem" structureRef="java.lang.Long"/>
  <bpmn2:itemDefinition id="__E0024B6B-D932-46A4-90AD-27A8D95489D6_reviewListOutputXItem" structureRef="java.util.ArrayList"/>
  <bpmn2:itemDefinition id="_E0024B6B-D932-46A4-90AD-27A8D95489D6_multiInstanceItemType_patient" structureRef="String"/>
  <bpmn2:itemDefinition id="_E0024B6B-D932-46A4-90AD-27A8D95489D6_multiInstanceItemType_review" structureRef="Boolean"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_SkippableInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_PriorityInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_CommentInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_DescriptionInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_CreatedByInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_TaskNameInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_GroupIdInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_ContentInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_NotStartedReassignInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_NotCompletedReassignInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_NotStartedNotifyInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_NotCompletedNotifyInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_fhirServerInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_requestQuestionnaireIdInputXItem" structureRef="java.lang.Long"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_patientListOutputXItem" structureRef="java.util.ArrayList"/>
  <bpmn2:itemDefinition id="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_requestQuestionnaireResponseIdOutputXItem" structureRef="java.lang.Long"/>
  <bpmn2:process id="gestorconsentimientos-kjar.ConsentRequest" drools:packageName="org.jbpm" drools:version="1.0" drools:adHoc="false" name="ConsentRequest" isExecutable="true" processType="Public">
    <bpmn2:documentation id="_DSitoTbNEe-_3vOU48Zj7Q"><![CDATA[Proceso de negocio en el que un facultativo médico, solicita un  consentimiento, respecto a determinados asuntos, a un conjunto de pacientes.]]></bpmn2:documentation>
    <bpmn2:extensionElements>
      <drools:import name="java.util.ArrayList"/>
      <drools:import name="java.lang.Long"/>
    </bpmn2:extensionElements>
    <bpmn2:property id="practitioner" itemSubjectRef="_practitionerItem" name="practitioner"/>
    <bpmn2:property id="fhirServer" itemSubjectRef="_fhirServerItem" name="fhirServer"/>
    <bpmn2:property id="requestQuestionnaireId" itemSubjectRef="_requestQuestionnaireIdItem" name="requestQuestionnaireId"/>
    <bpmn2:property id="requestQuestionnaireResponseId" itemSubjectRef="_requestQuestionnaireResponseIdItem" name="requestQuestionnaireResponseId"/>
    <bpmn2:property id="patientList" itemSubjectRef="_patientListItem" name="patientList"/>
    <bpmn2:property id="reviewList" itemSubjectRef="_reviewListItem" name="reviewList"/>
    <bpmn2:sequenceFlow id="_D66AA2B4-7228-4FB5-BCB8-1E1F8F1BAB36" sourceRef="_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A" targetRef="_E0024B6B-D932-46A4-90AD-27A8D95489D6"/>
    <bpmn2:sequenceFlow id="_7769911A-A234-4708-9DCA-C2DA48F6A492" sourceRef="_9C329017-C865-46EA-A556-820F1803AF8B" targetRef="_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A"/>
    <bpmn2:sequenceFlow id="_4589E52C-B938-4D60-9A20-92177D282C5D" sourceRef="_49CFC9A0-24AD-49C2-B9D0-176690E6C8A0" targetRef="_9C329017-C865-46EA-A556-820F1803AF8B"/>
    <bpmn2:sequenceFlow id="_35DDEF79-61F9-4F35-BF67-43DCAE6EF848" sourceRef="_E0024B6B-D932-46A4-90AD-27A8D95489D6" targetRef="_6664E05F-A9A4-493D-A6B3-9CC4AA330226"/>
    <bpmn2:startEvent id="_49CFC9A0-24AD-49C2-B9D0-176690E6C8A0">
      <bpmn2:outgoing>_4589E52C-B938-4D60-9A20-92177D282C5D</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:userTask id="_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A" name="Consent Request Generation">
      <bpmn2:documentation id="_DSjUsDbNEe-_3vOU48Zj7Q"><![CDATA[El facultativo médico rellena un cuestionario que genera la solicitud de consentimiento que quiere llevar a cabo.]]></bpmn2:documentation>
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Consent Request Generation]]></drools:metaValue>
        </drools:metaData>
        <drools:onEntry-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("JBPM -- Entro en la tarea 'Consent Request Generation' del proceso 'ConsentRequest'.");

System.out.println("fhirServer: " + kcontext.getVariable("fhirServer"));
System.out.println("requestQuestionnaireId: " + kcontext.getVariable("requestQuestionnaireId"));
System.out.println("requestQuestionnaireResponseId: " + kcontext.getVariable("requestQuestionnaireResponseId"));
System.out.println("practitioner: " + kcontext.getVariable("practitioner"));
System.out.println("patientList: " + kcontext.getVariable("patientList"));
System.out.println("reviewList: " + kcontext.getVariable("reviewList"));]]></drools:script>
        </drools:onEntry-script>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("JBPM -- Salgo de la tarea 'Consent Request Generation' del proceso 'ConsentRequest'.");

System.out.println("fhirServer: " + kcontext.getVariable("fhirServer").toString());
System.out.println("requestQuestionnaireId: " + kcontext.getVariable("requestQuestionnaireId"));
System.out.println("requestQuestionnaireResponseId: " + kcontext.getVariable("requestQuestionnaireResponseId"));
System.out.println("practitioner: " + kcontext.getVariable("practitioner"));
System.out.println("patientList: " + kcontext.getVariable("patientList"));
System.out.println("reviewList: " + kcontext.getVariable("reviewList"));]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_7769911A-A234-4708-9DCA-C2DA48F6A492</bpmn2:incoming>
      <bpmn2:outgoing>_D66AA2B4-7228-4FB5-BCB8-1E1F8F1BAB36</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_DSjUsTbNEe-_3vOU48Zj7Q">
        <bpmn2:dataInput id="_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_TaskNameInputX" drools:dtype="Object" itemSubjectRef="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_TaskNameInputXItem" name="TaskName"/>
        <bpmn2:dataInput id="_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_fhirServerInputX" drools:dtype="String" itemSubjectRef="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_fhirServerInputXItem" name="fhirServer"/>
        <bpmn2:dataInput id="_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_requestQuestionnaireIdInputX" drools:dtype="java.lang.Long" itemSubjectRef="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_requestQuestionnaireIdInputXItem" name="requestQuestionnaireId"/>
        <bpmn2:dataInput id="_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_SkippableInputX" drools:dtype="Object" itemSubjectRef="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_SkippableInputXItem" name="Skippable"/>
        <bpmn2:dataOutput id="_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_patientListOutputX" drools:dtype="java.util.ArrayList" itemSubjectRef="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_patientListOutputXItem" name="patientList"/>
        <bpmn2:dataOutput id="_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_requestQuestionnaireResponseIdOutputX" drools:dtype="java.lang.Long" itemSubjectRef="__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_requestQuestionnaireResponseIdOutputXItem" name="requestQuestionnaireResponseId"/>
        <bpmn2:inputSet id="_DSjUsjbNEe-_3vOU48Zj7Q">
          <bpmn2:dataInputRefs>_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_TaskNameInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_fhirServerInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_requestQuestionnaireIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_SkippableInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_DSjUszbNEe-_3vOU48Zj7Q">
          <bpmn2:dataOutputRefs>_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_patientListOutputX</bpmn2:dataOutputRefs>
          <bpmn2:dataOutputRefs>_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_requestQuestionnaireResponseIdOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_DSjUtDbNEe-_3vOU48Zj7Q">
        <bpmn2:targetRef>_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_DSjUtTbNEe-_3vOU48Zj7Q">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_DSjUtjbNEe-_3vOU48Zj7Q"><![CDATA[ConsentRequestGeneration]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_DSjUtzbNEe-_3vOU48Zj7Q">_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_DSjUuDbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>fhirServer</bpmn2:sourceRef>
        <bpmn2:targetRef>_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_fhirServerInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_DSjUuTbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>requestQuestionnaireId</bpmn2:sourceRef>
        <bpmn2:targetRef>_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_requestQuestionnaireIdInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_DSjUujbNEe-_3vOU48Zj7Q">
        <bpmn2:targetRef>_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_SkippableInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_DSjUuzbNEe-_3vOU48Zj7Q">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_DSjUvDbNEe-_3vOU48Zj7Q"><![CDATA[false]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_DSjUvTbNEe-_3vOU48Zj7Q">_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_SkippableInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_DSjUvjbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_patientListOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>patientList</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:dataOutputAssociation id="_DSjUvzbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_requestQuestionnaireResponseIdOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>requestQuestionnaireResponseId</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:potentialOwner id="_f1427b20-09c6-4169-8440-d6466c422154">
        <bpmn2:resourceAssignmentExpression id="_DSjUwDbNEe-_3vOU48Zj7Q">
          <bpmn2:formalExpression id="_DSjUwTbNEe-_3vOU48Zj7Q">wbadmin</bpmn2:formalExpression>
        </bpmn2:resourceAssignmentExpression>
      </bpmn2:potentialOwner>
    </bpmn2:userTask>
    <bpmn2:callActivity id="_E0024B6B-D932-46A4-90AD-27A8D95489D6" drools:independent="false" drools:waitForCompletion="true" name="Multiple Consent Review" calledElement="gestorconsentimientos-kjar.ConsentReview">
      <bpmn2:documentation id="_DSjUwjbNEe-_3vOU48Zj7Q"><![CDATA[Cada uno de los pacientes a los que van dirigidos la solicitud de consentimiento, tiene que indicar si la acepta o la rechaza. ]]></bpmn2:documentation>
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Multiple Consent Review]]></drools:metaValue>
        </drools:metaData>
        <drools:onEntry-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("JBPM -- Entro en la tarea 'Multiple Consent Review' del proceso 'ConsentRequest'.");

System.out.println("fhirServer: " + kcontext.getVariable("fhirServer"));
System.out.println("requestQuestionnaireId: " + kcontext.getVariable("requestQuestionnaireId"));
System.out.println("requestQuestionnaireResponseId: " + kcontext.getVariable("requestQuestionnaireResponseId"));
System.out.println("practitioner: " + kcontext.getVariable("practitioner"));
System.out.println("patientList: " + kcontext.getVariable("patientList"));
System.out.println("reviewList: " + kcontext.getVariable("reviewList"));]]></drools:script>
        </drools:onEntry-script>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("JBPM -- Salgo de la tarea 'Multiple Consent Review' del proceso 'ConsentRequest'.");

System.out.println("fhirServer: " + kcontext.getVariable("fhirServer"));
System.out.println("requestQuestionnaireId: " + kcontext.getVariable("requestQuestionnaireId"));
System.out.println("requestQuestionnaireResponseId: " + kcontext.getVariable("requestQuestionnaireResponseId"));
System.out.println("practitioner: " + kcontext.getVariable("practitioner"));
System.out.println("patientList: " + kcontext.getVariable("patientList"));
System.out.println("reviewList: " + kcontext.getVariable("reviewList"));]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_D66AA2B4-7228-4FB5-BCB8-1E1F8F1BAB36</bpmn2:incoming>
      <bpmn2:outgoing>_35DDEF79-61F9-4F35-BF67-43DCAE6EF848</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_DSjUwzbNEe-_3vOU48Zj7Q">
        <bpmn2:dataInput id="_E0024B6B-D932-46A4-90AD-27A8D95489D6_requestQuestionnaireResponseIdInputX" drools:dtype="java.lang.Long" itemSubjectRef="__E0024B6B-D932-46A4-90AD-27A8D95489D6_requestQuestionnaireResponseIdInputXItem" name="requestQuestionnaireResponseId"/>
        <bpmn2:dataInput id="_E0024B6B-D932-46A4-90AD-27A8D95489D6_fhirServerInputX" drools:dtype="String" itemSubjectRef="__E0024B6B-D932-46A4-90AD-27A8D95489D6_fhirServerInputXItem" name="fhirServer"/>
        <bpmn2:dataInput id="_E0024B6B-D932-46A4-90AD-27A8D95489D6_patientListInputX" drools:dtype="java.util.ArrayList" itemSubjectRef="__E0024B6B-D932-46A4-90AD-27A8D95489D6_patientListInputXItem" name="patientList"/>
        <bpmn2:dataInput id="_E0024B6B-D932-46A4-90AD-27A8D95489D6_practitionerInputX" drools:dtype="String" itemSubjectRef="__E0024B6B-D932-46A4-90AD-27A8D95489D6_practitionerInputXItem" name="practitioner"/>
        <bpmn2:dataInput id="_E0024B6B-D932-46A4-90AD-27A8D95489D6_requestQuestionnaireIdInputX" drools:dtype="java.lang.Long" itemSubjectRef="__E0024B6B-D932-46A4-90AD-27A8D95489D6_requestQuestionnaireIdInputXItem" name="requestQuestionnaireId"/>
        <bpmn2:dataInput id="_E0024B6B-D932-46A4-90AD-27A8D95489D6_IN_COLLECTIONInputX" itemSubjectRef="_patientListItem" name="IN_COLLECTION"/>
        <bpmn2:dataInput id="_E0024B6B-D932-46A4-90AD-27A8D95489D6_patientInputX" itemSubjectRef="_E0024B6B-D932-46A4-90AD-27A8D95489D6_multiInstanceItemType_patient" name="patient"/>
        <bpmn2:dataOutput id="_E0024B6B-D932-46A4-90AD-27A8D95489D6_reviewListOutputX" drools:dtype="java.util.ArrayList" itemSubjectRef="__E0024B6B-D932-46A4-90AD-27A8D95489D6_reviewListOutputXItem" name="reviewList"/>
        <bpmn2:dataOutput id="_E0024B6B-D932-46A4-90AD-27A8D95489D6_OUT_COLLECTIONOutputX" itemSubjectRef="_reviewListItem" name="OUT_COLLECTION"/>
        <bpmn2:dataOutput id="_E0024B6B-D932-46A4-90AD-27A8D95489D6_reviewOutputX" itemSubjectRef="_E0024B6B-D932-46A4-90AD-27A8D95489D6_multiInstanceItemType_review" name="review"/>
        <bpmn2:inputSet id="_DSjUxDbNEe-_3vOU48Zj7Q">
          <bpmn2:dataInputRefs>_E0024B6B-D932-46A4-90AD-27A8D95489D6_requestQuestionnaireResponseIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_E0024B6B-D932-46A4-90AD-27A8D95489D6_fhirServerInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_E0024B6B-D932-46A4-90AD-27A8D95489D6_patientListInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_E0024B6B-D932-46A4-90AD-27A8D95489D6_practitionerInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_E0024B6B-D932-46A4-90AD-27A8D95489D6_requestQuestionnaireIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_E0024B6B-D932-46A4-90AD-27A8D95489D6_IN_COLLECTIONInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_E0024B6B-D932-46A4-90AD-27A8D95489D6_patientInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_DSjUxTbNEe-_3vOU48Zj7Q">
          <bpmn2:dataOutputRefs>_E0024B6B-D932-46A4-90AD-27A8D95489D6_reviewListOutputX</bpmn2:dataOutputRefs>
          <bpmn2:dataOutputRefs>_E0024B6B-D932-46A4-90AD-27A8D95489D6_OUT_COLLECTIONOutputX</bpmn2:dataOutputRefs>
          <bpmn2:dataOutputRefs>_E0024B6B-D932-46A4-90AD-27A8D95489D6_reviewOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_DSjUxjbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>requestQuestionnaireResponseId</bpmn2:sourceRef>
        <bpmn2:targetRef>_E0024B6B-D932-46A4-90AD-27A8D95489D6_requestQuestionnaireResponseIdInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_DSjUxzbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>fhirServer</bpmn2:sourceRef>
        <bpmn2:targetRef>_E0024B6B-D932-46A4-90AD-27A8D95489D6_fhirServerInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_DSjUyDbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>patientList</bpmn2:sourceRef>
        <bpmn2:targetRef>_E0024B6B-D932-46A4-90AD-27A8D95489D6_patientListInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_DSjUyTbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>practitioner</bpmn2:sourceRef>
        <bpmn2:targetRef>_E0024B6B-D932-46A4-90AD-27A8D95489D6_practitionerInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_DSjUyjbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>requestQuestionnaireId</bpmn2:sourceRef>
        <bpmn2:targetRef>_E0024B6B-D932-46A4-90AD-27A8D95489D6_requestQuestionnaireIdInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_DSjUyzbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>patientList</bpmn2:sourceRef>
        <bpmn2:targetRef>_E0024B6B-D932-46A4-90AD-27A8D95489D6_IN_COLLECTIONInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_DSjUzDbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>patient</bpmn2:sourceRef>
        <bpmn2:targetRef>_E0024B6B-D932-46A4-90AD-27A8D95489D6_patientInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_DSjUzTbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>_E0024B6B-D932-46A4-90AD-27A8D95489D6_reviewListOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>reviewList</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:dataOutputAssociation id="_DSjUzjbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>_E0024B6B-D932-46A4-90AD-27A8D95489D6_OUT_COLLECTIONOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>reviewList</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:dataOutputAssociation id="_DSjUzzbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>_E0024B6B-D932-46A4-90AD-27A8D95489D6_reviewOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>review</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:multiInstanceLoopCharacteristics id="_DSjU0DbNEe-_3vOU48Zj7Q">
        <bpmn2:loopDataInputRef>_E0024B6B-D932-46A4-90AD-27A8D95489D6_IN_COLLECTIONInputX</bpmn2:loopDataInputRef>
        <bpmn2:loopDataOutputRef>_E0024B6B-D932-46A4-90AD-27A8D95489D6_OUT_COLLECTIONOutputX</bpmn2:loopDataOutputRef>
        <bpmn2:inputDataItem xsi:type="bpmn2:tDataInput" id="patient" itemSubjectRef="_E0024B6B-D932-46A4-90AD-27A8D95489D6_multiInstanceItemType_patient" name="patient"/>
        <bpmn2:outputDataItem xsi:type="bpmn2:tDataOutput" id="review" itemSubjectRef="_E0024B6B-D932-46A4-90AD-27A8D95489D6_multiInstanceItemType_review" name="review"/>
      </bpmn2:multiInstanceLoopCharacteristics>
    </bpmn2:callActivity>
    <bpmn2:task id="_9C329017-C865-46EA-A556-820F1803AF8B" drools:taskName="ConsentRequestConfig" name="ConsentRequestConfig">
      <bpmn2:documentation id="_DSjU0TbNEe-_3vOU48Zj7Q"><![CDATA[Tarea que va a definir el cuestionario que el facultativo médico va a rellenar para generar la solicitud de consentimiento.]]></bpmn2:documentation>
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[ConsentRequestConfig]]></drools:metaValue>
        </drools:metaData>
        <drools:onEntry-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("JBPM -- Entro en la tarea 'Consent Request Config' del proceso 'ConsentRequest'.");

System.out.println("fhirServer: " + kcontext.getVariable("fhirServer"));
System.out.println("requestQuestionnaireId: " + kcontext.getVariable("requestQuestionnaireId"));
System.out.println("requestQuestionnaireResponseId: " + kcontext.getVariable("requestQuestionnaireResponseId"));
System.out.println("practitioner: " + kcontext.getVariable("practitioner"));
System.out.println("patientList: " + kcontext.getVariable("patientList"));
System.out.println("reviewList: " + kcontext.getVariable("reviewList"));]]></drools:script>
        </drools:onEntry-script>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("JBPM -- Salgo de la tarea 'Consent Request Config' del proceso 'ConsentRequest'.");

System.out.println("fhirServer: " + kcontext.getVariable("fhirServer"));
System.out.println("requestQuestionnaireId: " + kcontext.getVariable("requestQuestionnaireId"));
System.out.println("requestQuestionnaireResponseId: " + kcontext.getVariable("requestQuestionnaireResponseId"));
System.out.println("practitioner: " + kcontext.getVariable("practitioner"));
System.out.println("patientList: " + kcontext.getVariable("patientList"));
System.out.println("reviewList: " + kcontext.getVariable("reviewList"));]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_4589E52C-B938-4D60-9A20-92177D282C5D</bpmn2:incoming>
      <bpmn2:outgoing>_7769911A-A234-4708-9DCA-C2DA48F6A492</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_DSjU0jbNEe-_3vOU48Zj7Q">
        <bpmn2:dataInput id="_9C329017-C865-46EA-A556-820F1803AF8B_processNameInputX" drools:dtype="String" itemSubjectRef="__9C329017-C865-46EA-A556-820F1803AF8B_processNameInputXItem" name="processName"/>
        <bpmn2:dataInput id="_9C329017-C865-46EA-A556-820F1803AF8B_TaskNameInputX" drools:dtype="Object" name="TaskName"/>
        <bpmn2:dataOutput id="_9C329017-C865-46EA-A556-820F1803AF8B_fhirServerOutputX" drools:dtype="String" itemSubjectRef="__9C329017-C865-46EA-A556-820F1803AF8B_fhirServerOutputXItem" name="fhirServer"/>
        <bpmn2:dataOutput id="_9C329017-C865-46EA-A556-820F1803AF8B_requestQuestionnaireIdOutputX" drools:dtype="java.lang.Long" itemSubjectRef="__9C329017-C865-46EA-A556-820F1803AF8B_requestQuestionnaireIdOutputXItem" name="requestQuestionnaireId"/>
        <bpmn2:inputSet id="_DSjU0zbNEe-_3vOU48Zj7Q">
          <bpmn2:dataInputRefs>_9C329017-C865-46EA-A556-820F1803AF8B_processNameInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_9C329017-C865-46EA-A556-820F1803AF8B_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_DSjU1DbNEe-_3vOU48Zj7Q">
          <bpmn2:dataOutputRefs>_9C329017-C865-46EA-A556-820F1803AF8B_fhirServerOutputX</bpmn2:dataOutputRefs>
          <bpmn2:dataOutputRefs>_9C329017-C865-46EA-A556-820F1803AF8B_requestQuestionnaireIdOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_DSjU1TbNEe-_3vOU48Zj7Q">
        <bpmn2:targetRef>_9C329017-C865-46EA-A556-820F1803AF8B_processNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_DSjU1jbNEe-_3vOU48Zj7Q">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_DSjU1zbNEe-_3vOU48Zj7Q"><![CDATA[ConsentRequest]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_DSjU2DbNEe-_3vOU48Zj7Q">_9C329017-C865-46EA-A556-820F1803AF8B_processNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_DSjU2TbNEe-_3vOU48Zj7Q">
        <bpmn2:targetRef>_9C329017-C865-46EA-A556-820F1803AF8B_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_DSjU2jbNEe-_3vOU48Zj7Q">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_DSjU2zbNEe-_3vOU48Zj7Q"><![CDATA[ConsentRequestConfig]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_DSjU3DbNEe-_3vOU48Zj7Q">_9C329017-C865-46EA-A556-820F1803AF8B_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_DSjU3TbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>_9C329017-C865-46EA-A556-820F1803AF8B_fhirServerOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>fhirServer</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:dataOutputAssociation id="_DSjU3jbNEe-_3vOU48Zj7Q">
        <bpmn2:sourceRef>_9C329017-C865-46EA-A556-820F1803AF8B_requestQuestionnaireIdOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>requestQuestionnaireId</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:endEvent id="_6664E05F-A9A4-493D-A6B3-9CC4AA330226">
      <bpmn2:incoming>_35DDEF79-61F9-4F35-BF67-43DCAE6EF848</bpmn2:incoming>
    </bpmn2:endEvent>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="_DSjU3zbNEe-_3vOU48Zj7Q">
    <bpmndi:BPMNPlane id="_DSjU4DbNEe-_3vOU48Zj7Q" bpmnElement="gestorconsentimientos-kjar.ConsentRequest">
      <bpmndi:BPMNShape id="shape__6664E05F-A9A4-493D-A6B3-9CC4AA330226" bpmnElement="_6664E05F-A9A4-493D-A6B3-9CC4AA330226">
        <dc:Bounds height="56.0" width="56.0" x="1220.0" y="223.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__9C329017-C865-46EA-A556-820F1803AF8B" bpmnElement="_9C329017-C865-46EA-A556-820F1803AF8B">
        <dc:Bounds height="100.0" width="224.0" x="379.0" y="202.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__E0024B6B-D932-46A4-90AD-27A8D95489D6" bpmnElement="_E0024B6B-D932-46A4-90AD-27A8D95489D6">
        <dc:Bounds height="101.0" width="153.0" x="954.5" y="200.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A" bpmnElement="_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A">
        <dc:Bounds height="102.0" width="154.0" x="687.0" y="200.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__49CFC9A0-24AD-49C2-B9D0-176690E6C8A0" bpmnElement="_49CFC9A0-24AD-49C2-B9D0-176690E6C8A0">
        <dc:Bounds height="56.0" width="56.0" x="271.0" y="223.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge_shape__E0024B6B-D932-46A4-90AD-27A8D95489D6_to_shape__6664E05F-A9A4-493D-A6B3-9CC4AA330226" bpmnElement="_35DDEF79-61F9-4F35-BF67-43DCAE6EF848">
        <di:waypoint xsi:type="dc:Point" x="1031.0" y="250.5"/>
        <di:waypoint xsi:type="dc:Point" x="1220.0" y="251.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__49CFC9A0-24AD-49C2-B9D0-176690E6C8A0_to_shape__9C329017-C865-46EA-A556-820F1803AF8B" bpmnElement="_4589E52C-B938-4D60-9A20-92177D282C5D">
        <di:waypoint xsi:type="dc:Point" x="299.0" y="251.0"/>
        <di:waypoint xsi:type="dc:Point" x="379.0" y="252.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__9C329017-C865-46EA-A556-820F1803AF8B_to_shape__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A" bpmnElement="_7769911A-A234-4708-9DCA-C2DA48F6A492">
        <di:waypoint xsi:type="dc:Point" x="491.0" y="252.0"/>
        <di:waypoint xsi:type="dc:Point" x="687.0" y="251.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__E3019AC5-A7AE-47FC-8905-10F0EE92DD5A_to_shape__E0024B6B-D932-46A4-90AD-27A8D95489D6" bpmnElement="_D66AA2B4-7228-4FB5-BCB8-1E1F8F1BAB36">
        <di:waypoint xsi:type="dc:Point" x="764.0" y="251.0"/>
        <di:waypoint xsi:type="dc:Point" x="954.5" y="250.5"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmn2:relationship id="_DSjU4TbNEe-_3vOU48Zj7Q" type="BPSimData">
    <bpmn2:extensionElements>
      <bpsim:BPSimData>
        <bpsim:Scenario xsi:type="bpsim:Scenario" id="default" name="Simulationscenario">
          <bpsim:ScenarioParameters xsi:type="bpsim:ScenarioParameters"/>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_9C329017-C865-46EA-A556-820F1803AF8B" id="_DSjU4jbNEe-_3vOU48Zj7Q">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_E0024B6B-D932-46A4-90AD-27A8D95489D6" id="_DSjU4zbNEe-_3vOU48Zj7Q">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_E3019AC5-A7AE-47FC-8905-10F0EE92DD5A" id="_DSjU5DbNEe-_3vOU48Zj7Q">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_49CFC9A0-24AD-49C2-B9D0-176690E6C8A0" id="_DSjU5TbNEe-_3vOU48Zj7Q">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
        </bpsim:Scenario>
      </bpsim:BPSimData>
    </bpmn2:extensionElements>
    <bpmn2:source>_DSitoDbNEe-_3vOU48Zj7Q</bpmn2:source>
    <bpmn2:target>_DSitoDbNEe-_3vOU48Zj7Q</bpmn2:target>
  </bpmn2:relationship>
</bpmn2:definitions>
